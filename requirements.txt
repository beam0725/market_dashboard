import streamlit as st
import yfinance as yf
import pandas as pd

st.set_page_config(page_title="è·¨åœ‹å¤§ç›¤æŒ‡æ•¸å„€è¡¨æ¿", layout="wide")

st.title("ğŸŒ è·¨åœ‹å¤§ç›¤æŒ‡æ•¸èµ°å‹¢åœ–")

# åœ‹åˆ¥èˆ‡æŒ‡æ•¸
market_options = {
    "ç¾åœ‹": {
        "S&P 500": "^GSPC",
        "Nasdaq": "^IXIC",
        "é“ç“Šå·¥æ¥­æŒ‡æ•¸": "^DJI"
    },
    "å°ç£": {
        "åŠ æ¬ŠæŒ‡æ•¸": "^TWII"
    }
}

# ä½¿ç”¨è€…ä»‹é¢
selected_country = st.selectbox("è«‹é¸æ“‡åœ‹å®¶", list(market_options.keys()))
date_range = st.date_input("é¸æ“‡æ—¥æœŸå€é–“", value=[pd.to_datetime("2023-01-01"), pd.to_datetime("today")])

start_date = date_range[0].strftime("%Y-%m-%d")
end_date = date_range[1].strftime("%Y-%m-%d")

st.subheader(f"{selected_country} æŒ‡æ•¸èµ°å‹¢")

for index_name, ticker in market_options[selected_country].items():
    df = yf.download(ticker, start=start_date, end=end_date)
    if not df.empty:
        st.line_chart(df['Close'], height=300, use_container_width=True)
    else:
        st.warning(f"ç„¡æ³•å–å¾— {index_name} çš„è³‡æ–™")
